<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Account Intelligence Panel</title>

<style>
  :root{
    --bg: #f4f6f8;
    --surface: #ffffff;
    --border: #e6e9f0;
    --muted: #667085;
    --text: #111827;
    --shadow1: 0 1px 2px rgba(16,24,40,.04);
    --shadow2: 0 4px 14px rgba(16,24,40,.06);
    --radius: 12px;
  }

  * { box-sizing: border-box; }
  body{
    margin:0;
    padding:22px;
    background: var(--bg);
    color: var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  }

  .container{
    max-width: 980px;
    margin: 0 auto;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 18px;
    box-shadow: 0 10px 30px rgba(16,24,40,.08);
  }

  /* Header */
  .header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:16px;
    margin-bottom: 14px;
  }
  .header h1{
    margin:0;
    font-size: 20px;
    line-height: 1.2;
    letter-spacing: -0.02em;
  }
  .sub{
    margin-top:6px;
    font-size: 12px;
    color: var(--muted);
    line-height: 1.35;
  }
  .mono{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
  }
  .tag{
    font-size:12px;
    background:#eef2ff;
    color:#3730a3;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #e0e7ff;
    white-space:nowrap;
  }

  /* Layout */
  .grid{
    display:grid;
    grid-template-columns: 1.15fr 0.85fr;
    gap: 12px;
    align-items:start;
  }
  @media (max-width: 920px){
    .grid{ grid-template-columns: 1fr; }
  }

  /* Panels */
  .panel{
    background: linear-gradient(180deg, #ffffff 0%, #fbfcfe 100%);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 14px;
    box-shadow: var(--shadow1), var(--shadow2);
    position: relative;
    overflow: hidden;
    transform: translateY(0);
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .panel::before{
    content:"";
    position:absolute;
    left:0;
    top:0;
    right:0;
    height:3px;
    background: linear-gradient(90deg,#2563eb,#7c3aed,#06b6d4);
    opacity:.18;
  }
  .panel:hover{
    box-shadow:
      0 2px 6px rgba(16,24,40,.06),
      0 10px 24px rgba(16,24,40,.08);
    transform: translateY(-1px);
  }

  /* Tinted panel variants */
  .panelSnapshot{
    background: linear-gradient(180deg,#f8fbff 0%, #ffffff 40%);
  }
  .panelSignals{
    background: linear-gradient(180deg,#f8fffb 0%, #ffffff 45%);
  }
  .panelMap{
    background: linear-gradient(180deg,#fffdf7 0%, #ffffff 45%);
  }
  .panelContext{
    background: linear-gradient(180deg,#f7f9ff 0%, #ffffff 45%);
  }
  .panelAI{
    background:
      radial-gradient(circle at top right, rgba(124,58,237,.08), transparent 40%),
      radial-gradient(circle at bottom left, rgba(37,99,235,.06), transparent 50%),
      #ffffff;
  }

  .panelHeader{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    margin-bottom: 10px;
  }
  .panelTitle{
    font-size:11px;
    font-weight:800;
    letter-spacing:.08em;
    color:#667085;
    text-transform:uppercase;
  }

  .divider{
    height:1px;
    background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
    margin: 12px 0;
  }

  /* Pills */
  .pillRow{ display:flex; gap:8px; flex-wrap:wrap; }
  .pill{
    font-size:12px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #e5e7eb;
    background:#f9fafb;
    color:#344054;
  }
  .pillProgress{
    background:#fff4e5;
    color:#b45309;
    border-color:#fde3b0;
  }
  .pillDone{
    background:#ecfdf3;
    color:#027a48;
    border-color:#b7ebc6;
  }
  .pillFuture{
    background:#f2f4f7;
    color:#667085;
    border-color:#e4e7ec;
  }

  /* Score */
  .scoreWrap{
    display:flex;
    gap:12px;
    align-items:flex-start;
  }
  .score{
    position:relative;
    min-width: 110px;
  }
  .score::after{
    content:"";
    position:absolute;
    left:-10px;
    top:-10px;
    width:72px;
    height:72px;
    border-radius:50%;
    background: radial-gradient(circle, rgba(37,99,235,.12) 0%, rgba(37,99,235,0) 70%);
    z-index:-1;
  }
  .scoreBig{
    font-size: 36px;
    font-weight: 900;
    color: #2563eb;
    letter-spacing: -.02em;
    text-shadow: 0 1px 0 rgba(255,255,255,.6);
    line-height: 1;
  }
  .muted{ color: var(--muted); font-size:12px; }
  .good{ color:#027a48; font-weight:800; }
  .bad{ color:#b42318; font-weight:800; }

  ul{
    margin: 10px 0 0 18px;
    padding:0;
  }
  li{ margin: 6px 0; }

  /* Buttons */
  .btnRow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
  button{
    padding:10px 14px;
    border-radius:10px;
    border:1px solid transparent;
    cursor:pointer;
    font-weight:700;
    font-size: 13px;
    transition: transform .06s ease, filter .15s ease;
  }
  button:active{ transform: translateY(1px); }

  .btnPrimary{
    background: linear-gradient(180deg,#2563eb,#1d4ed8);
    color:#fff;
    border:1px solid #1e40af;
    box-shadow: 0 1px 2px rgba(16,24,40,.1);
  }
  .btnPrimary:hover{ filter: brightness(1.03); }
  .btnGhost{
    background:#ffffff;
    border:1px solid #d0d5dd;
    color:#344054;
    box-shadow: 0 1px 1px rgba(16,24,40,.05);
  }
  .btnGhost:hover{ background:#f9fafb; }

  .toast{
    margin-top: 12px;
    padding: 10px 12px;
    background:#ecfeff;
    border:1px solid #a5f3fc;
    border-radius:10px;
    color:#155e75;
    display:none;
    font-size: 12px;
  }

  /* MAP steps */
  .mapStep{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding: 10px 10px;
    border: 1px solid #eef2f7;
    background:#ffffff;
    border-radius: 10px;
    margin-top: 10px;
  }
  .mapStep strong{ font-size: 13px; }
  .mapMeta{ font-size: 12px; color: var(--muted); margin-top: 2px; }

  /* Right column quick card */
  .contextName{
    font-weight: 800;
    font-size: 14px;
    margin-bottom: 2px;
  }
  .smallLabel{
    font-size: 12px;
    color: var(--muted);
    margin-top: 8px;
    margin-bottom: 6px;
    font-weight: 700;
  }
</style>
</head>

<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>Account Intelligence Panel</h1>
        <div class="sub">
          Prospective Account: <span id="accountName">—</span><br/>
          Primary Contact: <span id="contactName">—</span> · <span id="contactEmail">—</span><br/>
          HubSpot Contact ID: <span class="mono" id="contactId">—</span> · Owner: <span id="owner">—</span>
        </div>
      </div>
      <div class="tag">Signals + Next Best Action</div>
    </div>

    <div class="grid">
      <!-- LEFT COLUMN -->
      <div>
        <div class="panel panelSnapshot">
          <div class="panelHeader">
            <div class="panelTitle">Snapshot</div>
            <div class="pillRow">
              <span class="pill" id="segmentPill">Segment: —</span>
              <span class="pill" id="lifecyclePill">Lifecycle: —</span>
              <span class="pill" id="leadStatusPill">Lead Status: —</span>
            </div>
          </div>

          <div class="scoreWrap">
            <div class="score">
              <div class="muted">Deal Health Score</div>
              <div class="scoreBig"><span id="healthScore">65</span>%</div>
              <div class="muted">Calculated from CRM completeness + engagement</div>
            </div>

            <div style="flex:1;">
              <div class="muted">Recommendation</div>
              <div class="good" id="recommendation" style="font-size:16px; margin-top:2px;">Proceed to Quote</div>

              <div class="divider"></div>

              <div class="muted">Why Now</div>
              <div style="font-weight:800; margin-top:2px;" id="whyNow">Engagement trending up</div>
              <div class="muted" id="whyNowDetail">Top buying signal</div>
            </div>
          </div>
        </div>

        <div class="panel panelSignals" style="margin-top:12px;">
          <div class="panelHeader">
            <div class="panelTitle">Intent & Buying Signals</div>
          </div>
          <ul id="signalsList">
            <li>Website activity spike last 7 days</li>
            <li>Hiring for RevOps / Sales Ops roles</li>
            <li>Tech stack suggests CRM consolidation opportunity</li>
          </ul>

          <div class="divider"></div>

          <div class="panelTitle">Risks</div>
          <ul id="risksList">
            <li><span class="bad">Competing offer from another vendor</span></li>
            <li>Cost expectations slightly below range</li>
          </ul>
        </div>

        <div class="panel panelMap" style="margin-top:12px;">
          <div class="panelHeader">
            <div class="panelTitle">Mutual Action Plan (MAP)</div>
          </div>
          <div class="muted">A clean path from discovery → close, tied to this account.</div>

          <div class="mapStep">
            <div>
              <strong>Discovery → Success Criteria</strong>
              <div class="mapMeta">Owner: AE · Due: 3 business days</div>
            </div>
            <span class="pill pillProgress">In Progress</span>
          </div>

          <div class="mapStep">
            <div>
              <strong>Solution Review</strong>
              <div class="mapMeta">Owner: SE · Due: 7 business days</div>
            </div>
            <span class="pill pillFuture">Not Started</span>
          </div>

          <div class="mapStep">
            <div>
              <strong>Security / IT Review</strong>
              <div class="mapMeta">Owner: Buyer IT · Due: 10 business days</div>
            </div>
            <span class="pill pillFuture">Not Started</span>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div>
        <div class="panel panelContext">
          <div class="panelHeader">
            <div class="panelTitle">Live CRM Context</div>
          </div>

          <div class="contextName"><span id="contextName">—</span> · <span id="contextEmail">—</span></div>
          <div class="muted">Prospective Account: <span id="contextAccount">—</span></div>

          <div class="divider"></div>

          <div class="smallLabel">Engagement</div>
          <div class="pillRow">
            <span class="pill" id="lastTouch">Last touch: —</span>
            <span class="pill" id="meetings30d">Meetings (30d): —</span>
          </div>

          <div class="divider"></div>

          <div class="smallLabel">Next Best Actions</div>
          <div class="btnRow">
            <button class="btnPrimary" id="followUpBtn">Create Follow-up Task</button>
            <button class="btnGhost" id="noteBtn">Log Note</button>
            <button class="btnGhost" id="workflowBtn">Trigger Workflow</button>
          </div>

          <div class="toast" id="toast"></div>
        </div>

        <div class="panel panelAI" style="margin-top:12px;">
          <div class="panelHeader">
            <div class="panelTitle">Talk Track Summary</div>
          </div>
          <div class="muted" id="talkTrack">
            This panel consolidates third-party account intelligence and converts it into guided next steps inside HubSpot,
            reducing context switching and improving speed-to-action.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // Query params allow your HubSpot UI Extension to pass "real-ish" CRM context into this iframe URL:
  // ?contactId=123&name=Brian%20Halligan&email=bh@cupcakelabs.com&account=Cupcake%20Labs&owner=Isaac%20Herrera
  const qs = new URLSearchParams(window.location.search);

  const contactId = qs.get("contactId") || "";
  const name = qs.get("name") || "Brian Halligan";
  const email = qs.get("email") || "bh@cupcakelabs.com";
  const account = qs.get("account") || "Cupcake Labs";
  const owner = qs.get("owner") || "Isaac Herrera";

  const segment = qs.get("segment") || "Mid-Market";
  const lifecycle = qs.get("lifecycle") || "Lead";
  const leadStatus = qs.get("leadStatus") || "In progress";

  const score = qs.get("score") || "65";
  const recommendation = qs.get("recommendation") || "Proceed to Quote";
  const whyNow = qs.get("whyNow") || "Engagement trending up";
  const whyNowDetail = qs.get("whyNowDetail") || "Top buying signal";

  const lastTouch = qs.get("lastTouch") || "Call logged today";
  const meetings30d = qs.get("meetings30d") || "1";

  // Populate header
  document.getElementById("accountName").textContent = account;
  document.getElementById("contactName").textContent = name;
  document.getElementById("contactEmail").textContent = email;
  document.getElementById("contactId").textContent = contactId || "—";
  document.getElementById("owner").textContent = owner;

  // Pills
  document.getElementById("segmentPill").textContent = `Segment: ${segment}`;
  document.getElementById("lifecyclePill").textContent = `Lifecycle: ${lifecycle}`;
  document.getElementById("leadStatusPill").textContent = `Lead Status: ${leadStatus}`;

  // Score + rationale
  document.getElementById("healthScore").textContent = score;
  document.getElementById("recommendation").textContent = recommendation;
  document.getElementById("whyNow").textContent = whyNow;
  document.getElementById("whyNowDetail").textContent = whyNowDetail;

  // Context
  document.getElementById("contextName").textContent = name;
  document.getElementById("contextEmail").textContent = email;
  document.getElementById("contextAccount").textContent = account;
  document.getElementById("lastTouch").textContent = `Last touch: ${lastTouch}`;
  document.getElementById("meetings30d").textContent = `Meetings (30d): ${meetings30d}`;

  // Toast helpers (demo only)
  const toast = document.getElementById("toast");
  const showToast = (msg) => {
    toast.textContent = msg;
    toast.style.display = "block";
    setTimeout(() => (toast.style.display = "none"), 2600);
  };

  document.getElementById("followUpBtn").addEventListener("click", () => {
    showToast("Follow-up task created (demo). Next: write task to HubSpot via serverless/API.");
  });
  document.getElementById("noteBtn").addEventListener("click", () => {
    showToast("Note logged (demo). Next: create engagement note on the CRM record.");
  });
  document.getElementById("workflowBtn").addEventListener("click", () => {
    showToast("Workflow triggered (demo). Next: enroll record in workflow via API.");
  });
</script>
</body>
</html>
